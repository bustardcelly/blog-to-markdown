
	
	<h1 class="entry-title full-title"><a href="http://custardbelly.com/blog/2013/01/22/the-making-of-a-test-driven-grocery-list-application-part-viii/" title="Permanent link to The Making of a Test-Driven Grocery List Application: Part VIII" rel="bookmark" rev="post-747">The Making of a Test-Driven Grocery List Application: Part VIII</a></h1>
	
	<div class="entry-content full-content">
		<p><em>This is the eighth installment in a series of building a Test-Driven Grocery List application using <a href="http://pivotal.github.com/jasmine/" target="_blank">Jasmine</a> and <a href="http://requirejs.org" target="_blank">RequireJS</a>. To learn more about the intent and general concept of the series please visit <a href="http://custardbelly.com/blog/2012/11/26/the-making-of-a-test-driven-grocery-list-application-in-javascript-part-i/">The Making of a Test-Driven Grocery List Application in JavaScript: Part I</a></em><br>
—</p>
<h1>Introduction</h1>
<p>In the past several articles we have sort of have been living in the spec runner. We fiddled about making it turn red and green, and – until <a href="http://custardbelly.com/blog/2013/01/17/the-making-of-a-test-driven-grocery-list-application-in-js-part-vii/" target="_blank">the last article</a> – we never really ran the <strong>Grocery List</strong> application we were building to give it a proper <em>User Testing</em>. If you did play around with the actual application we have been busy writing tests for, you may have found a bug. An unexpected result from supplying no grocery item name before saving it to the list:</p>
<p><img src="http://custardbelly.com/blog/images/tdd_js/part_viii_1.png" alt="Image for bug ticket with empty item."></p>
<p>As you can see from the screenshot, there is an empty item in the third entry of the list. While I do think the act of walking into a store and picking up nothing is an accomplishment at times, this <em>Empty Item</em> bug is not an intended feature. In this article, I want to squash that bug… but – in keep with the theme of this series – we are going to do it through tests! Calm down. It is hard to read when you jump up and down like that.</p>
<h1>Bug Ticket</h1>
<p>Before we begin fixing the bug, let’s get it down in writing what we think the problem is and how we think the intended behavior should be. To start, we don’t want empty items added to the <strong>Grocery List</strong>. We are currently able to add them – and rather easily – so let’s list out the steps that allows us to do so:</p>
<p><em>Empty Item Added to List</em><br>
—<br>
<strong>Steps to Reproduce</strong></p>
<ol>
<li>Launch the Grocery List application</li>
<li>Click ‘add item’ button</li>
<li>In focused input field, type the name of a grocery item, ie. ‘apples’ (sans quotes)</li>
<li>Click the Tab button to save to list</li>
<li>Click ‘add item’ button</li>
<li>Leave the focused input field blank</li>
<li>Click the Tab button</li>
</ol>
<p><strong>Result</strong><br>
Empty item is added to the list</p>
<p><strong>Expected Result</strong><br>
An item without any name value provided is not added to the list</p>
<p><strong>Additional Notes</strong><br>
It is not a requirement to first have a valid item added to the list in order to reproduce the issue. Steps 1-4 are intended to show expected behavior with a non-empty item.<br>
—</p>
<p><small>If you are out there reading this and file bug tickets, please, for the love of software, log a ticket with a structure similar to this. Most modern bug tracking systems have fields like this, but you’d be surprised (or maybe not) how tickets come in sometimes. My least favorite is explained bug in the title. I can only imagine that they are the same people who write the whole email in the Subject field.</small></p>
<p>Alright, so now we know what we are dealing with. We have clear steps to reproduce the issue we think is a bug and have explained the difference between the actual result and the intended/expected result. Let’s tackle it.</p>
<h1>Tests</h1>
<p>As the developer of the application, we probably know exactly where this is happening. Our initial response is to go write to the source and resolve this issue. But we’re not going to do that. Don’t give me that look. I know, I know. The less we have to be in bug-fixing-mode, the happier developer we be, but I think if we have a test that supports the validity of this claim then, when we do make changes to the application code and it still passes, we know we have not committed a regression. I think it is a confidence builder in relying on my code to work properly and takes away some stress when refactoring comes into play.</p>
<p>Before we begin, let’s think about where we will add the tests. We could append another spec suite to the <em>Add Item</em> specs – after all, this bug occurs upon the completion of the <em>Add Item</em> feature. But in thinking about how to reproduce the issue, it seems like it may be another feature, or at least could be discovered in a feature we haven’t addressed – <em>Edit Item</em>. Essentially, when we get to the 3rd step – <em>In focused input field, type the name of a grocery item, ie. ‘apples’ (sans quotes)</em> – we have already added the item to the list. It has entered an edit mode, from which we need to ensure the validity of the value provided before saving it to the list. </p>
<p>Now, a true <strong>TDD</strong>‘er probably would stop me right now and tell me I am thinking too much to get this resolved. And, in part, they would be correct in doing so. But it is not my intent to start dreaming up new features during bug fixing. I just want to properly think about where the tests make the most sense. I don’t think they belong as an addendum to the <em>Add Item</em> specs and should live in there own spec suite in a separate file:</p>
<p><em>/test/jasmine/spec/feature/saveitem.spec.js</em></p>
<div><pre><div class="line number1 index0 alt2"><code class="jscript plain">define([</code><code class="jscript string">'jquery'</code><code class="jscript plain">, </code><code class="jscript string">'script/controller/list-controller'</code><code class="jscript plain">, </code><code class="jscript string">'script/controller/list-item-controller'</code><code class="jscript plain">],</code></div><div class="line number2 index1 alt1"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript keyword">function</code><code class="jscript plain">($, listController, itemControllerFactory) {</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript plain">describe(</code><code class="jscript string">'Save item to grocery list'</code><code class="jscript plain">, </code><code class="jscript keyword">function</code><code class="jscript plain">() {</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">it(</code><code class="jscript string">'should not save an empty item to the list'</code><code class="jscript plain">) {</code></div><div class="line number7 index6 alt2"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">expect(</code><code class="jscript keyword">true</code><code class="jscript plain">).toEqual(</code><code class="jscript keyword">false</code><code class="jscript plain">);</code></div><div class="line number8 index7 alt1"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">}</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript plain">}</code></div><div class="line number11 index10 alt2"><code class="jscript plain">}</code></div></pre></div>
<p>Given the steps provided in the bug ticket, we could easily translate that into the setup for the spec suite:</p>
<p><em>/test/jasmine/spec/feature/saveitem.spec.js</em></p>
<div><pre><div class="line number1 index0 alt2"><code class="jscript plain">define([</code><code class="jscript string">'jquery'</code><code class="jscript plain">, </code><code class="jscript string">'script/controller/list-controller'</code><code class="jscript plain">, </code><code class="jscript string">'script/controller/list-item-controller'</code><code class="jscript plain">],</code></div><div class="line number2 index1 alt1"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript keyword">function</code><code class="jscript plain">($, listController, itemControllerFactory) {</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript plain">describe(</code><code class="jscript string">'Save item to grocery list'</code><code class="jscript plain">, </code><code class="jscript keyword">function</code><code class="jscript plain">() {</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1 highlighted"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript keyword">var</code> <code class="jscript plain">item,</code></div><div class="line number7 index6 alt2 highlighted"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">itemName = </code><code class="jscript string">'apples'</code><code class="jscript plain">,</code></div><div class="line number8 index7 alt1 highlighted"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">invalidName = </code><code class="jscript string">''</code><code class="jscript plain">,</code></div><div class="line number9 index8 alt2 highlighted"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">itemRenderer,</code></div><div class="line number10 index9 alt1 highlighted"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">async = </code><code class="jscript keyword">new</code> <code class="jscript plain">AsyncSpec(</code><code class="jscript keyword">this</code><code class="jscript plain">);</code></div><div class="line number11 index10 alt2 highlighted">&nbsp;</div><div class="line number12 index11 alt1 highlighted"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">beforeEach( </code><code class="jscript keyword">function</code><code class="jscript plain">() {</code></div><div class="line number13 index12 alt2 highlighted"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">item = listController.createNewItem();</code></div><div class="line number14 index13 alt1 highlighted"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">itemRenderer = listController.getRendererFromItem(item);</code></div><div class="line number15 index14 alt2 highlighted"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">});</code></div><div class="line number16 index15 alt1">&nbsp;</div><div class="line number17 index16 alt2"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">it(</code><code class="jscript string">'should not save an empty item to the list'</code><code class="jscript plain">, </code><code class="jscript keyword">function</code><code class="jscript plain">() {</code></div><div class="line number18 index17 alt1"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">expect(</code><code class="jscript keyword">true</code><code class="jscript plain">).toEqual(</code><code class="jscript keyword">false</code><code class="jscript plain">);</code></div><div class="line number19 index18 alt2"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">});</code></div><div class="line number20 index19 alt1">&nbsp;</div><div class="line number21 index20 alt2 highlighted"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">afterEach( </code><code class="jscript keyword">function</code><code class="jscript plain">() {</code></div><div class="line number22 index21 alt1 highlighted"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">item = undefined;</code></div><div class="line number23 index22 alt2 highlighted"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">itemRenderer = undefined;</code></div><div class="line number24 index23 alt1 highlighted"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">});</code></div><div class="line number25 index24 alt2"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript plain">});</code></div><div class="line number26 index25 alt1">&nbsp;</div><div class="line number27 index26 alt2"><code class="jscript plain">});</code></div></pre></div>
<p>In the <code>beforeEach()</code> setup, we have progressed the application – or at least a list item – to essentially the 3rd step in the <em>Steps to Reproduce</em>: we have added a new item to the list, and internally upon addition of an item in the <code>list-controller</code>, it has entered edit-mode for that item. In the variable declarations, we have also defined what we know of as being valid and invalid item entry names: <em>‘apples’</em> and <em>”</em>, respectively. </p>
<p>We should be ready to go in our specs now to define the rest of the steps and expected results:</p>
<p><em>/test/jasmine/spec/feature/saveitem.spec.js</em></p>
<div><pre><div class="line number17 index0 alt2"><code class="jscript plain">it(</code><code class="jscript string">'should not save an empty item to the list'</code><code class="jscript plain">, </code><code class="jscript keyword">function</code><code class="jscript plain">() {</code></div><div class="line number18 index1 alt1 highlighted"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript keyword">var</code> <code class="jscript plain">listLength = listController.getItemList().itemLength();</code></div><div class="line number19 index2 alt2">&nbsp;</div><div class="line number20 index3 alt1 highlighted"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript plain">item.name = invalidName;</code></div><div class="line number21 index4 alt2"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript comments">// save item... ?</code></div><div class="line number22 index5 alt1 highlighted"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript plain">expect(listController.getItemList().itemLength()).toEqual(listLength);</code></div><div class="line number23 index6 alt2"><code class="jscript plain">});</code></div></pre></div>
<p>Oh, boy. How do we actually save an item? There is no API on the <code>list-controller</code> that saves an item. There used to be, but we refactored that out when we handed over item management to the <code>list-item-controller</code>. Furthermore, an item is added and kept on the list since its request for creation – the actual reason for the bug, I suppose. I am fine with such functionality internally to the <code>list-controller</code> as it stands now and don’t intend to change the item creation. I think an additional event should be dispatched from a <code>list-item-controller</code> signifying a request to commit the item to the list after being edited. Let’s finish up this spec under such assumptions, then work our way through the failing test:</p>
<p><em>/test/jasmine/spec/feature/saveitem.spec.js</em></p>
<div><pre><div class="line number17 index0 alt2"><code class="jscript plain">async.it(</code><code class="jscript string">'should not save an empty item to the list'</code><code class="jscript plain">, </code><code class="jscript keyword">function</code><code class="jscript plain">(done) {</code></div><div class="line number18 index1 alt1"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript keyword">var</code> <code class="jscript plain">listLength = listController.getItemList().itemLength();</code></div><div class="line number19 index2 alt2">&nbsp;</div><div class="line number20 index3 alt1"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript plain">$(itemRenderer).on(</code><code class="jscript string">'commit'</code><code class="jscript plain">, </code><code class="jscript keyword">function</code><code class="jscript plain">(event) {</code></div><div class="line number21 index4 alt2"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">expect(listController.getItemList().itemLength()).toEqual(listLength-1);</code></div><div class="line number22 index5 alt1"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">done();</code></div><div class="line number23 index6 alt2"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript plain">});</code></div><div class="line number24 index7 alt1">&nbsp;</div><div class="line number25 index8 alt2"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript plain">item.name = invalidName;</code></div><div class="line number26 index9 alt1"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript plain">itemRenderer.save();</code></div><div class="line number27 index10 alt2"><code class="jscript plain">});</code></div></pre></div>
<p>We marked the spec as asynchronous to support events from the <code>list-item-controller</code> and placed the expectation within the <em>‘commit’</em> event handler.</p>
<p>Run that, and we’ll be waiting for about 5 seconds until we are told that save() is not a method on the <code>list-item-controller</code> instance:</p>
<p><img src="http://custardbelly.com/blog/images/tdd_js/part_viii_2.png" alt="Failing save item test with timeout"></p>
<p><small>I have temporarily commented out the other tests in order to remove any noise and focus solely on resolving this bug. This is for local testing and would not commit the spec runner in such a state when committing back to the repo and running latest on a CI server.</small></p>
<p>To resolve that, let’s open up <code>list-item-controller</code> and add that method:</p>
<p><em>/script/controller/list-item-controller.js</em></p>
<div><pre><div class="line number71 index0 alt2"><code class="jscript plain">listItemController = {</code></div><div class="line number72 index1 alt1"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript plain">$editableView: undefined,</code></div><div class="line number73 index2 alt2"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript plain">$uneditableView: undefined,</code></div><div class="line number74 index3 alt1"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript plain">init: </code><code class="jscript keyword">function</code><code class="jscript plain">() {</code></div><div class="line number75 index4 alt2"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">...</code></div><div class="line number76 index5 alt1"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript keyword">return</code> <code class="jscript keyword">this</code><code class="jscript plain">;</code></div><div class="line number77 index6 alt2"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript plain">},</code></div><div class="line number78 index7 alt1"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript plain">save: </code><code class="jscript keyword">function</code><code class="jscript plain">() {</code></div><div class="line number79 index8 alt2"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript plain">},</code></div><div class="line number80 index9 alt1"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript plain">dispose: </code><code class="jscript keyword">function</code><code class="jscript plain">() {</code></div><div class="line number81 index10 alt2"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">...</code></div><div class="line number82 index11 alt1"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript plain">}</code></div><div class="line number83 index12 alt2"><code class="jscript plain">};</code></div></pre></div>
<p>Run that again, and now we are down to just the timeout failure:</p>
<p><img src="http://custardbelly.com/blog/images/tdd_js/part_viii_3.png" alt="Timeout failure on list-item-controller save"></p>
<p>To resolve that, we’ll first create a new event factory method and invoke it from <code>save()</code> to dispatch the <em>commit</em> event, of which we have assigned a handler for in the test:</p>
<p><em>/script/controller/list-item-controller.js</em></p>
<div><pre><div class="line number16 index0 alt1"><code class="jscript keyword">function</code> <code class="jscript plain">createSaveEvent(controller) {</code></div><div class="line number17 index1 alt2"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript keyword">var</code> <code class="jscript plain">event = $.Event(</code><code class="jscript string">'commit'</code><code class="jscript plain">);</code></div><div class="line number18 index2 alt1"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript plain">event.controller = controller;</code></div><div class="line number19 index3 alt2"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript keyword">return</code> <code class="jscript plain">event;</code></div><div class="line number20 index4 alt1"><code class="jscript plain">}</code></div></pre></div>
<p>and…</p>
<div><pre><div class="line number111 index0 alt2"><code class="jscript plain">save: </code><code class="jscript keyword">function</code><code class="jscript plain">() {</code></div><div class="line number112 index1 alt1 highlighted"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript plain">$(</code><code class="jscript keyword">this</code><code class="jscript plain">).trigger(createSaveEvent(</code><code class="jscript keyword">this</code><code class="jscript plain">));</code></div><div class="line number113 index2 alt2"><code class="jscript plain">},</code></div></pre></div>
<p>No more timeout!</p>
<p><img src="http://custardbelly.com/blog/images/tdd_js/part_viii_4.png" alt="Failing expectation on list-item-controller save."></p>
<p>But still failing. Reason is that the item had not been removed from the collection. In previous tests we have verified its addition to the collection from the <code>createNewItem()</code> method on <code>list-controller</code>. Now that we are saving the <code>list-item-controller</code> with a modified model that has an invalid name, we are expecting such an action to remove the item from the collection – the crux of our <em>Empty Item</em> bug.</p>
<p>Let’s modify the <code>list-controller</code> in order to handle the commit event from a <code>list-item-controller</code>:</p>
<p><em>/script/controller/list-controller.js</em></p>
<div><pre><div class="line number40 index0 alt1"><code class="jscript plain">$collection.on(</code><code class="jscript string">'collection-change'</code><code class="jscript plain">, </code><code class="jscript keyword">function</code><code class="jscript plain">(event) {</code></div><div class="line number41 index1 alt2"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript keyword">var</code> <code class="jscript plain">model, itemController, $itemView;</code></div><div class="line number42 index2 alt1"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript keyword">switch</code><code class="jscript plain">( event.kind ) {</code></div><div class="line number43 index3 alt2"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript keyword">case</code> <code class="jscript plain">EventKindEnum.ADD:</code></div><div class="line number44 index4 alt1"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">$itemView = $(</code><code class="jscript string">'&lt;li&gt;'</code><code class="jscript plain">);</code></div><div class="line number45 index5 alt2"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">model = event.items.shift();</code></div><div class="line number46 index6 alt1"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">itemController = itemControllerFactory.create($itemView, model);</code></div><div class="line number47 index7 alt2">&nbsp;</div><div class="line number48 index8 alt1"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">$itemView.appendTo(listController.$view);</code></div><div class="line number49 index9 alt2"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">rendererList.addItem(itemController);</code></div><div class="line number50 index10 alt1"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">itemController.state = itemControllerFactory.state.EDITABLE;</code></div><div class="line number51 index11 alt2"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">$(itemController).on(</code><code class="jscript string">'remove'</code><code class="jscript plain">, </code><code class="jscript keyword">function</code><code class="jscript plain">(event) {</code></div><div class="line number52 index12 alt1"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">listController.removeItem(model);</code></div><div class="line number53 index13 alt2"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">});</code></div><div class="line number54 index14 alt1 highlighted"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">$(itemController).on(</code><code class="jscript string">'commit'</code><code class="jscript plain">, </code><code class="jscript keyword">function</code><code class="jscript plain">(event) {</code></div><div class="line number55 index15 alt2 highlighted"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript keyword">if</code><code class="jscript plain">(!isValidValue(model.name)) {</code></div><div class="line number56 index16 alt1 highlighted"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">listController.removeItem(model);</code></div><div class="line number57 index17 alt2 highlighted"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">}</code></div><div class="line number58 index18 alt1 highlighted"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">});</code></div><div class="line number59 index19 alt2"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript keyword">break</code><code class="jscript plain">;</code></div><div class="line number60 index20 alt1"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript keyword">case</code> <code class="jscript plain">EventKindEnum.REMOVE:</code></div><div class="line number61 index21 alt2"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">model = event.items.shift();</code></div><div class="line number62 index22 alt1"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">itemController = listController.getRendererFromItem(model);</code></div><div class="line number63 index23 alt2">&nbsp;</div><div class="line number64 index24 alt1"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript keyword">if</code><code class="jscript plain">(itemController) {</code></div><div class="line number65 index25 alt2"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">$itemView = itemController.parentView;</code></div><div class="line number66 index26 alt1"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">$itemView.remove();</code></div><div class="line number67 index27 alt2"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">itemController.dispose();</code></div><div class="line number68 index28 alt1"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">$(itemController).off(</code><code class="jscript string">'remove'</code><code class="jscript plain">);</code></div><div class="line number69 index29 alt2 highlighted"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">$(itemController).off(</code><code class="jscript string">'commit'</code><code class="jscript plain">);</code></div><div class="line number70 index30 alt1"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">rendererList.removeItem(itemController);</code></div><div class="line number71 index31 alt2"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">}</code></div><div class="line number72 index32 alt1"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript keyword">break</code><code class="jscript plain">;</code></div><div class="line number73 index33 alt2"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript keyword">case</code> <code class="jscript plain">EventKindEnum.RESET:</code></div><div class="line number74 index34 alt1"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript keyword">break</code><code class="jscript plain">;</code></div><div class="line number75 index35 alt2"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript plain">}</code></div><div class="line number76 index36 alt1"><code class="jscript plain">});</code></div></pre></div>
<p>We’ve added another event listener to the <code>list-item-controller</code> when it is added to the collection to handle the <em>commit</em> event. Within the handler we check for its validity – which we have predetermined as not being an empty string – and if it does not pass, then we remove it.<br>
<small>Note: In shipped code I would hold a single reference to a wrapped non-jQuery object and not wrap it multiple times as is shown here when adding and removing event handlers. I left it in this example to not add extra noise to the task at hand.</small></p>
<p>Run that, and we are back to green!<br>
<img src="http://custardbelly.com/blog/images/tdd_js/part_viii_5.png" alt="Passing test on commit event form list-item-controller"></p>
<h2>User Test</h2>
<p>Let’s run the application and see if the issue is resolved:<br>
<img src="http://custardbelly.com/blog/images/tdd_js/part_viii_6.png" alt="Non-resolution of bug in live test"><br>
I think that picture says it all…</p>
<p>The bug is still there because <code>save()</code> is not being called on the <code>list-item-controller</code>. In our test, we explicitly called it after a change to the model, but in the application itself it is not being invoked upon change to the model. </p>
<p>But before we start adding calls to <code>save()</code> in our code, let’s think about the steps to reproduce the bug… or at least the fourth step – <em>Click the Tab button to save to list</em>. The tab keystroke, internally to the <code>list-item-controller</code>, causes a blur to the input field. If we look at the code from <code>list-item-controller</code>, that <em>blur</em> event performs a change to state:</p>
<p><em>/script/controller/list-item-controller.js</em></p>
<div><pre><div class="line number91 index0 alt2"><code class="jscript plain">$(</code><code class="jscript string">'input'</code><code class="jscript plain">, </code><code class="jscript keyword">this</code><code class="jscript plain">.$editableView).on(</code><code class="jscript string">'blur'</code><code class="jscript plain">, (</code><code class="jscript keyword">function</code><code class="jscript plain">(controller) {</code></div><div class="line number92 index1 alt1"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript keyword">return</code> <code class="jscript keyword">function</code><code class="jscript plain">(event) {</code></div><div class="line number93 index2 alt2"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">controller.model.name = $(</code><code class="jscript keyword">this</code><code class="jscript plain">).val();</code></div><div class="line number94 index3 alt1"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">controller.state = stateEnum.UNEDITABLE;</code></div><div class="line number95 index4 alt2"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript plain">};</code></div><div class="line number96 index5 alt1"><code class="jscript plain">}(</code><code class="jscript keyword">this</code><code class="jscript plain">)));</code></div></pre></div>
<p>This snippet is taken from the event handler assignment in the <code>init()</code> function. When in edit mode of the <code>list-item-controller</code>, once focus is lost from the input field – which happens upon tab – the model is updated and state changed to non-edit mode. My first inkling is to put it here. It is true that, in doing so, it will pass and get rid of the bug… but the real commit of changes to the <code>list-item-controller</code> and its underlying model I feel lie in its change from edit mode to non-edit mode. I would argue that <code>save()</code> should be called from that occurrence. But before we add that to the code, let’s write up an expectation of that behavior.</p>
<h2>More Tests</h2>
<p><em>‘WHAT?!? The bug was in our sights. We know how to get rid of it, and you want to write more tests?!?’</em><br>
That is the voice in my head most of the time when I decide to go back to tests. It has lessened, and the swearing really has decreased. And when I finally do get around to passing tests, it goes away and is replaced with: <em>‘Nice job! You deserve a raise.. or at least an egg sandwich!’</em></p>
<p>Anyway, let’s get to <em>Egg Sandwich Status</em> and add another test to ensure that upon change to non-edit mode, if the model properties are not valid, that the item is not saved:</p>
<p><em>/test/jasmine/spec/feature/saveitem.spec.js</em></p>
<div><pre><div class="line number29 index0 alt2"><code class="jscript plain">async.it(</code><code class="jscript string">'should not save an empty item upon change to non-edit mode'</code><code class="jscript plain">, </code><code class="jscript keyword">function</code><code class="jscript plain">(done) {</code></div><div class="line number30 index1 alt1"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="jscript keyword">var</code> <code class="jscript plain">listLength = listController.getItemList().itemLength();</code></div><div class="line number31 index2 alt2">&nbsp;</div><div class="line number32 index3 alt1"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript plain">$(itemRenderer).on(</code><code class="jscript string">'commit'</code><code class="jscript plain">, </code><code class="jscript keyword">function</code><code class="jscript plain">(event) {</code></div><div class="line number33 index4 alt2"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">expect(listController.getItemList().itemLength()).toEqual(listLength - 1);</code></div><div class="line number34 index5 alt1"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">done();</code></div><div class="line number35 index6 alt2"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript plain">});</code></div><div class="line number36 index7 alt1">&nbsp;</div><div class="line number37 index8 alt2"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript plain">item.name = invalidName;</code></div><div class="line number38 index9 alt1"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript plain">itemRenderer.state = itemControllerFactory.state.UNEDITABLE;</code></div><div class="line number39 index10 alt2"><code class="jscript plain">});</code></div></pre></div>
<p>We have already verified the expectation that a <code>list-item-controller</code> is entered into an <code>EDITABLE</code> state from our <em>additem.spec.js</em> tests, so we don’t need to test for that here – just know that setting the <code>list-item-controller</code> instance to an <code>UNEDITABLE</code> state will trigger it to go into non-edit mode.</p>
<p>Run that, and we get the timeout failure from that test:<br>
<img src="http://custardbelly.com/blog/images/tdd_js/part_viii_7.png" alt="Timeout failure on non-edit mode commit"></p>
<p>Good! Before you slap me… save that hand for modifying the <code>list-item-controller</code> to invoke the save() method from its state-change handler:</p>
<p><em>/script/controller/list-item-controller.js</em></p>
<div><pre><div class="line number1 index0 alt2"><code class="jscript keyword">function</code> <code class="jscript plain">handleStateChange(controller, event) {</code></div><div class="line number2 index1 alt1"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript comments">// remove state-based item.</code></div><div class="line number3 index2 alt2"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript keyword">if</code><code class="jscript plain">( </code><code class="jscript keyword">typeof</code> <code class="jscript plain">event.oldState !== </code><code class="jscript string">'undefined'</code><code class="jscript plain">) {</code></div><div class="line number4 index3 alt1"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript keyword">if</code><code class="jscript plain">(event.oldState === stateEnum.UNEDITABLE) {</code></div><div class="line number5 index4 alt2"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">controller.$uneditableView.detach();</code></div><div class="line number6 index5 alt1"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">}</code></div><div class="line number7 index6 alt2"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript keyword">else</code> <code class="jscript keyword">if</code><code class="jscript plain">(event.oldState === stateEnum.EDITABLE) {</code></div><div class="line number8 index7 alt1"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">controller.$editableView.detach();</code></div><div class="line number9 index8 alt2"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">}</code></div><div class="line number10 index9 alt1"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript plain">}</code></div><div class="line number11 index10 alt2"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript comments">// append state-based item.</code></div><div class="line number12 index11 alt1"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript keyword">if</code><code class="jscript plain">(event.newState === stateEnum.UNEDITABLE) {</code></div><div class="line number13 index12 alt2"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">controller.parentView.append(controller.$uneditableView);</code></div><div class="line number14 index13 alt1"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">controller.save();</code></div><div class="line number15 index14 alt2"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript plain">}</code></div><div class="line number16 index15 alt1"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript keyword">else</code> <code class="jscript keyword">if</code><code class="jscript plain">(event.newState === stateEnum.EDITABLE) {</code></div><div class="line number17 index16 alt2"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript keyword">var</code> <code class="jscript plain">inputTimeout = setTimeout( </code><code class="jscript keyword">function</code><code class="jscript plain">()&nbsp; {</code></div><div class="line number18 index17 alt1"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">clearTimeout(inputTimeout);</code></div><div class="line number19 index18 alt2"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">$(</code><code class="jscript string">'input'</code><code class="jscript plain">, controller.$editableView).focus();</code></div><div class="line number20 index19 alt1"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">}, 100);</code></div><div class="line number21 index20 alt2"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">controller.parentView.append(controller.$editableView);</code></div><div class="line number22 index21 alt1"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript plain">}</code></div><div class="line number23 index22 alt2"><code class="jscript plain">}</code></div></pre></div>
<p>One little addition. Now run the tests:<br>
<img src="http://custardbelly.com/blog/images/tdd_js/part_viii_8.png" alt="Passing tests on change to non-edit mode and save."></p>
<p><em>Hooray!</em> Now use that hand you were gonna slap me with and high-five yourself. Now look at yourself… you look silly. Run the application you crazy solo-high-fiver:<br>
<img src="http://custardbelly.com/blog/images/tdd_js/part_viii_9.png" alt="Application does not save empty item"></p>
<p>That picture doesn’t say much, but – if all has gone well – it conveys that we are no longer able to save an item to the list when nothing has been provided in the input field and we can close the bug.</p>
<h3>Can’t Stop. Won’t Stop</h3>
<p>I would normally stop there, but I do like to sew things up nicely and verify all expectations. Such as:</p>
<p>1. Item controller view is not retained in list view if not valid:<br>
<em>/test/jasmine/spec/feature/saveitem.spec.js</em></p>
<div><pre><div class="line number43 index0 alt2"><code class="jscript plain">async.it(</code><code class="jscript string">'should not add an empty item to list view upon change to non-edit mode'</code><code class="jscript plain">, </code><code class="jscript keyword">function</code><code class="jscript plain">(done) {</code></div><div class="line number44 index1 alt1"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="jscript keyword">var</code> <code class="jscript plain">listViewLength = $listView.children().length;</code></div><div class="line number45 index2 alt2">&nbsp;</div><div class="line number46 index3 alt1"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript plain">$(itemRenderer).on(</code><code class="jscript string">'commit'</code><code class="jscript plain">, </code><code class="jscript keyword">function</code><code class="jscript plain">(event) {</code></div><div class="line number47 index4 alt2"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">expect($listView.children().length).toEqual(listViewLength - 1);</code></div><div class="line number48 index5 alt1"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">done();</code></div><div class="line number49 index6 alt2"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript plain">});</code></div><div class="line number50 index7 alt1">&nbsp;</div><div class="line number51 index8 alt2"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript plain">item.name = invalidName;</code></div><div class="line number52 index9 alt1"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript plain">itemRenderer.state = itemControllerFactory.state.UNEDITABLE;</code></div><div class="line number53 index10 alt2"><code class="jscript plain">});</code></div></pre></div>
<p>2. When going from edit to non-edit mode, valid items are retained:<br>
<em>/test/jasmine/spec/feature/saveitem.spec.js</em></p>
<div><pre><div class="line number55 index0 alt2"><code class="jscript plain">async.it(</code><code class="jscript string">'should save a valid item upon change to non-edit mode'</code><code class="jscript plain">, </code><code class="jscript keyword">function</code><code class="jscript plain">(done) {</code></div><div class="line number56 index1 alt1"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="jscript keyword">var</code> <code class="jscript plain">listLength = listController.getItemList().itemLength();</code></div><div class="line number57 index2 alt2">&nbsp;</div><div class="line number58 index3 alt1"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript plain">$(itemRenderer).on(</code><code class="jscript string">'commit'</code><code class="jscript plain">, </code><code class="jscript keyword">function</code><code class="jscript plain">(event) {</code></div><div class="line number59 index4 alt2"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">expect(listController.getItemList().itemLength()).toEqual(listLength);</code></div><div class="line number60 index5 alt1"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">done();</code></div><div class="line number61 index6 alt2"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript plain">});</code></div><div class="line number62 index7 alt1">&nbsp;</div><div class="line number63 index8 alt2"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript plain">item.name = itemName;</code></div><div class="line number64 index9 alt1"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript plain">itemRenderer.state = itemControllerFactory.state.UNEDITABLE;</code></div><div class="line number65 index10 alt2"><code class="jscript plain">});</code></div><div class="line number66 index11 alt1">&nbsp;</div><div class="line number67 index12 alt2"><code class="jscript plain">async.it(</code><code class="jscript string">'should add a valid item to list view upon change to non-edit mode'</code><code class="jscript plain">, </code><code class="jscript keyword">function</code><code class="jscript plain">(done) {</code></div><div class="line number68 index13 alt1"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="jscript keyword">var</code> <code class="jscript plain">listViewLength = $listView.children.length;</code></div><div class="line number69 index14 alt2">&nbsp;</div><div class="line number70 index15 alt1"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript plain">$(itemRenderer).on(</code><code class="jscript string">'commit'</code><code class="jscript plain">, </code><code class="jscript keyword">function</code><code class="jscript plain">(event) {</code></div><div class="line number71 index16 alt2"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">expect($listView.children().length).toEqual(listViewLength);</code></div><div class="line number72 index17 alt1"><code class="jscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="jscript plain">done();</code></div><div class="line number73 index18 alt2"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript plain">});</code></div><div class="line number74 index19 alt1">&nbsp;</div><div class="line number75 index20 alt2"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript plain">item.name = itemName;</code></div><div class="line number76 index21 alt1"><code class="jscript spaces">&nbsp;&nbsp;</code><code class="jscript plain">itemRenderer.state = itemControllerFactory.state.UNEDITABLE;</code></div><div class="line number77 index22 alt2"><code class="jscript plain">});</code></div></pre></div>
<p>Those additional specs will pass with flying colors and without having to modify any more application code:<br>
<img src="http://custardbelly.com/blog/images/tdd_js/part_viii_10.png" alt="Finishing up all expectations for Save Item feature"></p>
<p>Tagged <strong>0.1.12</strong>: <a href="https://github.com/bustardcelly/grocery-ls/tree/0.1.12" target="_blank">https://github.com/bustardcelly/grocery-ls/tree/0.1.12</a></p>
<h1>Conclusion</h1>
<p>In this article we tested our way to closing a bug.</p>
<p>Just as we had done in the <a href="http://custardbelly.com/blog/2013/01/17/the-making-of-a-test-driven-grocery-list-application-in-js-part-vii/" target="_blank">previous article</a>, we adhered more closely to the principles of <strong>TDD</strong> and trudge along making things turn <span style="color: red;">red</span> before <span style="color: green;">green</span> – even when we found the reason and knew the resolution for the <em>Empty Item</em> bug. In doing so, we sort of verified and documented in test a <em>Save Item</em> feature. Now we know where to add or modify tests if the usability in committing an item to the list is changed in our requirements.</p>
<h2>Todd can’t leave well enough alone</h2>
<p>The application is pretty much ready to use as is to boot! There is just one more thing that is nagging me – persistence. No pun intended. We can create a list of all the items we need at the grocery store just fine, but if we close the browser window… oh-noes. It’s lost. I gotta fix that… next.</p>
<p>Cheers for sticking around!</p>
<p>—-</p>
<h1>Link Dump</h1>
<h2>Reference</h2>
<p><a href="http://tddjs.com/" target="_blank">Test-Driven JavaScript Development by Christian Johansen</a><br>
<a href="http://dannorth.net/introducing-bdd/" target="_blank">Introducing BDD by Dan North</a><br>
<a href="http://cumulative-hypotheses.org/2011/08/30/tdd-as-if-you-meant-it/">TDD as if you Meant it by Keith Braithwaite</a><br>
<a href="http://requirejs.org/" target="_blank">RequireJS</a><br>
<a href="https://github.com/amdjs/amdjs-api/wiki/AMD" target="_blank">AMD</a><br>
<a href="http://pivotal.github.com/jasmine/" target="_blank">Jasmine</a><br>
<a href="http://sinonjs.org/" target="_blank">Sinon</a><br>
<a href="https://github.com/derickbailey/jasmine.async" target="_blank">Jasmine.Async</a></p>
<h2>Post Series</h2>
<p><a href="https://github.com/bustardcelly/grocery-ls">grocery-ls github repo</a><br>
<a href="http://custardbelly.com/blog/2012/11/26/the-making-of-a-test-driven-grocery-list-application-in-javascript-part-i" target="_blank">Part I – Introduction</a><br>
<a href="http://custardbelly.com/blog/2012/11/26/the-making-of-a-test-driven-grocery-list-application-in-js-part-ii">Part II – Feature: Add Item</a><br>
<a href="http://custardbelly.com/blog/2012/12/06/the-making-of-a-test-driven-grocery-list-application-in-js-part-iii">Part III – Feature: Mark-Off Item</a><br>
<a href="http://custardbelly.com/blog/2012/12/17/the-making-of-a-test-driven-grocery-list-application-in-js-part-iv">Part IV – Feature: List-Item-Controller</a><br>
<a href="http://custardbelly.com/blog/2012/12/31/the-making-of-a-test-driven-grocery-list-application-in-js-part-v/">Part V – Feature: List-Controller Refactoring</a><br>
<a href="http://custardbelly.com/blog/2013/01/08/the-making-of-a-test-driven-grocery-list-application-in-js-part-vi/" target="_blank">Part VI – Back to Passing</a><br>
<a href="http://custardbelly.com/blog/2013/01/17/the-making-of-a-test-driven-grocery-list-application-in-js-part-vii/">Part VII – Remove Item</a><br>
<a href="http://custardbelly.com/blog/2013/01/22/the-making-of-a-test-driven-grocery-list-application-part-viii/">Part VIII – Bug Fixing</a><br>
<a href="http://custardbelly.com/blog/2013/02/15/the-making-of-a-test-driven-grocery-list-application-in-js-part-ix/">Part IX – Persistence</a><br>
<a href="http://custardbelly.com/blog/2013/03/06/the-making-of-a-test-driven-grocery-list-application-in-js-part-x/">Part X – It Lives!</a></p>
		<div class="clear"></div>
	</div><!-- .entry-content-->
	
	<p class="filed categories alt-font tight">Posted in <a href="http://custardbelly.com/blog/category/amd/" title="View all posts in AMD" rel="category tag">AMD</a>,  <a href="http://custardbelly.com/blog/category/javascript/" title="View all posts in JavaScript" rel="category tag">JavaScript</a>,  <a href="http://custardbelly.com/blog/category/requirejs/" title="View all posts in RequireJS" rel="category tag">RequireJS</a>,  <a href="http://custardbelly.com/blog/category/grocery-ls/" title="View all posts in grocery-ls" rel="category tag">grocery-ls</a>,  <a href="http://custardbelly.com/blog/category/jasmine/" title="View all posts in jasmine" rel="category tag">jasmine</a>,  <a href="http://custardbelly.com/blog/category/unit-testing/" title="View all posts in unit-testing" rel="category tag">unit-testing</a>.</p>
	
	

	<!--/by-line-->

	<div id="post-comments-747-target"></div>
	<div class="clear"></div>
	
	