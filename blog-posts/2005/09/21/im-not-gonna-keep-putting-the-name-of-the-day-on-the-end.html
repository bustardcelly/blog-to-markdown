
	
	<h1 class="entry-title full-title"><a href="http://custardbelly.com/blog/2005/09/21/im-not-gonna-keep-putting-the-name-of-the-day-on-the-end/" title="Permanent link to i’m not gonna keep putting the name of the day on the end…" rel="bookmark" rev="post-21">i’m not gonna keep putting the name of the day on the end…</a></h1>
	
	<div class="entry-content full-content">
		<p><img src="http://custardbelly.com/blog/images/bitmap_trial3.gif"></p>
<p><em>Following up on my past two posts.</em></p>
<p>The prior two experiments were done using a png with a transparent background. i made it, so i know what i wanted… but what if the spritesheet you’re using isn’t in a format without an alpha channel?<br>
I ran a test using a png with a background color to see if i can strip out a specified color and still get the rendered staes i want.<br>
Yes i can- by using the threshold method of the BitmapData class.</p>
<p>the picture above is a screenshot of my test movie that shows the image loaded in the upper-left corner.</p>
<p><strong>To recap</strong>: i load an image into a mc, create a BitmapData instance and BitmapData.draw(mc) to capture the bitmap. Then i (aside from here) delete the mc, pass the BitmapData instance onto a “dissector” and render each state dependant on user action.<br>
In order to remove the offending color (in this case all pixels with a value of 0×00333333), run the following before passing the BitmapData instance on:</p>
<p><pre>// — where<br>
//              __bmp is my BitmapData instance,<br>
//              __threshold = 0×00333333,<br>
//              w and h are the dimesions of the loaded image<br>
// –<br>
private function applyThreshold(w:Number, h:height)<br>
{<br>
	__bmp.threshold(__bmp, new Rectangle(0, 0, w, h), new Point(0, 0), “==”, __threshold, 0xffff00, 0xffffff, false);<br>
}</pre></p>
<p>I kept the dropShadow in there to see if it still applied afterward, and lo and behold! excellent.<br>
One thought… for some reason when i set the color and mask arguments both to white, it didn’t mask- don’t know why, but i didn’t investigate too hard.<br>
Two thought… if my states held that same offending color (say in the eyes), it will remove it – i’ll have to work on that.</p>
		<div class="clear"></div>
	</div><!-- .entry-content-->
	
	<p class="filed categories alt-font tight">Posted in <a href="http://custardbelly.com/blog/category/flash/" title="View all posts in Flash" rel="category tag">Flash</a>,  <a href="http://custardbelly.com/blog/category/flash8/" title="View all posts in Flash8" rel="category tag">Flash8</a>.</p>
	
	

	<p class="by-line">
		<span class="author vcard full-author">
			<span class="by alt-font">By</span> <a class="url fn" href="http://custardbelly.com/blog/author/todd-anderson/" title="View all posts by todd anderson">todd anderson</a>		</span>
		<span class="date full-date"><span class="ndash alt-font">–</span> <abbr class="published" title="2005-09-21T23:44">September 21, 2005</abbr></span>
	</p><!--/by-line-->

	<div id="post-comments-21-target"></div>
	<div class="clear"></div>
	
	